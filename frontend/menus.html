<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Menus - Vite & Gourmand</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"></head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark sticky-top" style="background:rgba(0,0,0,.6)">
<div class="container"><a class="navbar-brand fw-bold" href="/">Vite &amp; Gourmand</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="nav">
<ul class="navbar-nav ms-auto gap-2">
<li class="nav-item"><a class="nav-link" href="/menus.html">Menus</a></li>
<li class="nav-item"><a class="nav-link" href="/contact.html">Contact</a></li>
<li class="nav-item"><a class="nav-link" href="/dashboard.html">Espace</a></li>
<li class="nav-item"><a class="nav-link" href="/login.html" id="navLogin">Connexion</a></li>
<li class="nav-item"><button class="btn btn-sm btn-outline-light" id="navLogout" style="display:none">Déconnexion</button></li>
</ul></div></div></nav>
<main class="container py-4">
<h1 class="h4">Tous les menus</h1>
<div class="row g-3">
  <div class="col-lg-3">
    <div class="card p-3">
      <h2 class="h6">Filtres</h2>
      <label class="form-label" for="maxPrice">Prix max</label><input id="maxPrice" class="form-control" type="number" step="0.01">
      <label class="form-label mt-2" for="theme">Thème</label>
      <select id="theme" class="form-select">
        <option value="">Tous</option><option value="classique">classique</option><option value="noel">noel</option><option value="evenement">evenement</option>
      </select>
      <label class="form-label mt-2" for="regime">Régime</label>
      <select id="regime" class="form-select">
        <option value="">Tous</option><option value="classique">classique</option><option value="vegan">vegan</option>
      </select>
      <label class="form-label mt-2" for="minPeople">Personnes min (<=)</label><input id="minPeople" class="form-control" type="number" min="1">
      <button class="btn btn-vg w-100 mt-3" id="apply">Appliquer</button>
    </div>
  </div>
  <div class="col-lg-9"><div id="list" class="row g-3" aria-live="polite"></div></div>
</div>
</main>
<footer class="py-4" style="border-top:1px solid #2a2d33"><div class="container d-flex flex-column flex-md-row justify-content-between gap-3">
<div><div class="fw-bold">Horaires</div><div>Lun–Dim : 09:00–19:00</div></div>
<div class="d-flex gap-3"><a href="/legal.html">Mentions légales</a><a href="/cgv.html">CGV</a></div></div></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script type="module">import{getUser,clearSession}from"/js/api.js";const u=getUser();const l=document.getElementById("navLogin");const o=document.getElementById("navLogout");
if(u){l.style.display="none";o.style.display="inline-block"};o?.addEventListener("click",()=>{clearSession();location.href="/"});</script>

<script type="module">
import { api } from "/js/api.js";
const qs=(id)=>document.getElementById(id); const list=qs("list");
async function load(){
  const p=new URLSearchParams();
  ["maxPrice","theme","regime","minPeople"].forEach(k=>{const v=qs(k).value; if(v) p.set(k,v);});
  const r=await api("/api/menus?"+p.toString());
  list.innerHTML = r.items.map(m=>`
    <div class="col-md-6"><div class="card p-3 h-100">
      <div class="d-flex justify-content-between"><div><div class="fw-bold">${m.title}</div><div class="text-secondary small">${m.theme} • ${m.regime}</div></div>
      <span class="badge" style="background:#203a2f;color:#9be7c0">${Number(m.base_price).toFixed(2)} €</span></div>
      <p class="mt-2 mb-2">${m.description}</p>
      <div class="small text-secondary">Min: ${m.min_people} • Stock: ${m.stock}</div>
      <div class="mt-2"><a class="btn btn-outline-light btn-sm" href="/menu.html?id=${m.id}">Détails</a></div>
    </div></div>`).join("") || '<div class="text-secondary">Aucun menu.</div>';
}
qs("apply").addEventListener("click", load);
await load();
</script>
</body></html>